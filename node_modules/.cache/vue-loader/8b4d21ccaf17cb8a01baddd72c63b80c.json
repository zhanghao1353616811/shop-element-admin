{"remainingRequest":"E:\\shop-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\shop-element-admin\\src\\views\\image\\index.vue?vue&type=style&index=0&id=304287f4&scoped=true&lange=less&lang=css&","dependencies":[{"path":"E:\\shop-element-admin\\src\\views\\image\\index.vue","mtime":1623997982337},{"path":"E:\\shop-element-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":1623913922085},{"path":"E:\\shop-element-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1623913926490},{"path":"E:\\shop-element-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":1623913924720},{"path":"E:\\shop-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1623913921305},{"path":"E:\\shop-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1623913926490}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmltYWdlLXdhcnAgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDU1cHg7CiAgYm90dG9tOiAwOwogIGxlZnQ6IDA7CiAgcmlnaHQ6IDA7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjlmYTsKfQoKLmhlYWRlci1jb250ZW50IHsKICBsaW5lLWhlaWdodDogNjBweDsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjY2NjOwp9CgouaGVhZGVyLXNlbGVjdCB7CiAgd2lkdGg6IDE1MHB4Owp9CgouaGVhZGVyLWlwdCB7CiAgbWFyZ2luOiAwIDEwcHg7CiAgd2lkdGg6IDIwMHB4Owp9CgoubWFpbi1jb250YWluZXIgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoKLmFzaWRlLWNvbnRlbnQgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICBib3R0b206IDA7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjY2NjOwp9CgouYXNpZGUtbGkgewogIHBhZGRpbmc6IDEwcHggMDsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7CiAgY3Vyc29yOiBwb2ludGVyCn0KCi5kcm9wLWRvd24gewogIHdpZHRoOiA1MHB4OwogIGhlaWdodDogMjVweDsKICBsaW5lLWhlaWdodDogMjVweDsKICBib3JkZXItcmFkaXVzOiA1cHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7Cn0KCi5tYWluLWNvbnRlbnQgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgbGVmdDogMjAwcHg7CiAgcmlnaHQ6IDA7CiAgYm90dG9tOiAwOwp9CgouZmxleC13aWR0aCB7CiAgd2lkdGg6IDEwMCU7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LXdyYXA6IHdyYXA7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBwYWRkaW5nLWxlZnQ6IDEzcHg7Cn0KCi5pbWctZmxleCB7CiAgd2lkdGg6IDE2OHB4OyAvKiDmjaLooYzlrZDlhYPntKDlm7rlrprlg4/ntKAgKi8KICBtYXJnaW46IDAgOHB4IDEwcHggMHB4OwogIGN1cnNvcjogcG9pbnRlcjsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCi5hY3RpdmUtaW1nIHsKICBib3JkZXI6IDFweCBzb2xpZCAjZGMzNTQ1Owp9CgouaW1nLXNyYyB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDBweDsKICBkaXNwbGF5OiBibG9jazsKfQoKLnRhZy10aXBzIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgcmlnaHQ6IDA7CiAgdG9wOiAwOwp9CgouaW1nLW5hbWUgewogIGNvbG9yOiAjZmZmOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBvcGFjaXR5OiAwLjg7CiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjUpOwp9CgouaW1hZ2UtYnRuIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIG1hcmdpbjogN3B4IDA7Cn0KCi5pbWctYnRuIHsKICBtYXJnaW4tbGVmdDogMDsKfQoKLmZvb3Rlci1jb250ZW50IHsKICBsaW5lLWhlaWdodDogNjBweDsKICBib3JkZXItdG9wOiAxcHggc29saWQgI2NjYzsKfQoKLmlwdC13aWR0aCB7CiAgd2lkdGg6IDMwMHB4Owp9CgoudXBsb2FkLWltZyB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9CgoucHJlLWltZyB7CiAgbWFyZ2luOiAtNjBweCAtMjBweCAtMzBweDsKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/image","sourcesContent":["<template>\r\n  <el-container class=\"image-warp\">\r\n    <el-header class=\"header-content\">\r\n      <div>\r\n        <el-select class=\"header-select\" v-model=\"search.order\" size=\"mini\" placeholder=\"输入图片排序方式\">\r\n          <el-option label=\"降序\" value=\"desc\"></el-option>\r\n          <el-option label=\"升序\" value=\"asce\"></el-option>\r\n        </el-select>\r\n        <el-input class=\"header-ipt\" v-model=\"search.kewords\" placeholder=\"输入图片名称\" size=\"mini\" clearable></el-input>\r\n        <el-button type=\"success\" size=\"mini\">搜索</el-button>\r\n      </div>\r\n      <div>\r\n        <!-- <el-button type=\"info\" size=\"mini\" v-if=\"item.isCheck\">取消选中</el-button>\r\n        <el-button type=\"danger\" size=\"mini\" v-if=\"item.isCheck\">批量删除</el-button> -->\r\n        <el-button type=\"success\" size=\"mini\" @click.stop=\"creOrUpPhotos(false)\">创建相册</el-button>\r\n        <el-button type=\"warning\" size=\"mini\" @click.stop=\"uploadImage()\">上传图片</el-button>\r\n      </div>\r\n    </el-header>\r\n    <el-container class=\"main-container\">\r\n      <el-aside class=\"aside-content\" width=\"200px\">\r\n        <photo-item class=\"aside-li\" v-for=\"(item, index) in photos\" :key=\"index\" :item=\"item\" :index=\"index\"\r\n          :isActive=\"(activeIndex === index)\" @click=\"clickPhotosItem\" @update=\"creOrUpPhotos\" @del=\"delPhotos\">\r\n        </photo-item>\r\n      </el-aside>\r\n      <el-main class=\"main-content\">\r\n        <div class=\"flex-width\">\r\n          <el-card :class=\"[ item.isCheck ? 'active-img' : '', 'img-flex']\" :body-style=\"{padding: '0px'}\" shadow=\"hover\" v-for=\"(item, index) in imgList\"\r\n            :key=\"index\">\r\n            <img class=\"img-src\" :src=\"item.src\" @click=\"chooseImg(item)\">\r\n            <el-tag class=\"tag-tips\" type=\"danger\" size=\"mini\" v-if=\"item.isCheck\">标签五</el-tag>\r\n            <div class=\"img-name\">{{item.name}}</div>\r\n            <div class=\"image-btn\">\r\n              <el-button class=\"el-icon-view\" type=\"mini\" @click=\"preItemImg(item)\"></el-button>\r\n              <el-button class=\"el-icon-edit img-btn\" type=\"mini\" @click=\"openImgName(item)\"></el-button>\r\n              <el-button class=\"el-icon-delete img-btn\" type=\"mini\" @click=\"delImg(index)\"></el-button>\r\n            </div>\r\n          </el-card>\r\n        </div>\r\n      </el-main>\r\n    </el-container>\r\n    <el-footer class=\"footer-content\">Footer</el-footer>\r\n    <!-- 修改创建相册 -->\r\n    <el-dialog width=\"700px\" :title=\"photoTitle\" :visible.sync=\"dialogFormVisible\" :close-on-click-modal=\"false\">\r\n      <el-form :model=\"photoData\">\r\n        <el-form-item label=\"相册名称\">\r\n          <el-input class=\"ipt-width\" v-model=\"photoData.name\" placeholder=\"请输入相册名称\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"相册排序\">\r\n          <el-input-number v-model=\"photoData.order\" :min=\"0\"></el-input-number>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button type=\"info\" @click=\"dialogFormVisible = false\">取消</el-button>\r\n        <el-button type=\"success\" @click.stop.native=\"confirmPhoto\">确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <!-- 上传图片 -->\r\n    <el-dialog width=\"700px\" title=\"上传图片\" :visible.sync=\"diaUpVisible\" :close-on-click-modal=\"false\">\r\n      <el-upload class=\"upload-img\" drag multiple action=\"https://jsonplaceholder.typicode.com/posts/\">\r\n        <i class=\"el-icon-upload\"></i>\r\n        <div>将文件拖到止处, 或<em>点击上传</em></div>\r\n        <div slot=\"tip\">只能上传jpg/png文件, 且不超过500kb</div>\r\n      </el-upload>\r\n    </el-dialog>\r\n    <!-- 预览图片 -->\r\n    <el-dialog :visible.sync=\"diaPreVisible\" :close-on-click-modal=\"false\">\r\n      <div class=\"pre-img\">\r\n        <img class=\"img-src\" :src=\"preImgSrc\">\r\n      </div>\r\n    </el-dialog>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\n  import photoItem from \"@/components/image/photo-item.vue\"\r\n  export default {\r\n    components: {\r\n      photoItem\r\n    },\r\n    data() {\r\n      return {\r\n        selectVal: '降序',\r\n        activeIndex: 0,\r\n        photos: [],\r\n        dialogFormVisible: false,\r\n        isUpdateIndex: -1, // 修改相册\r\n        diaUpVisible: false,\r\n        diaPreVisible: false,\r\n        preImgSrc: '',\r\n        imgList: [],\r\n        chooseImgList: [], \r\n        search: [{\r\n          order: 'desc',\r\n          kewords: ''\r\n        }],\r\n        photoData: {\r\n          name: '',\r\n          order: ''\r\n        },\r\n      }\r\n    },\r\n    computed: {\r\n      photoTitle() {\r\n        return this.isUpdateIndex > -1 ? '修改相册' : '创建相册'\r\n      }\r\n    },\r\n    created() {\r\n      this.initPhotos()\r\n      this.initImgList()\r\n    },\r\n\r\n    methods: {\r\n      initPhotos() {\r\n        for (let i = 0; i < 100; i++) {\r\n          this.photos.push({\r\n            name: '相册' + i,\r\n            num: Math.floor(Math.random() * 100),\r\n            order: 0\r\n          })\r\n        }\r\n      },\r\n\r\n      initImgList() {\r\n        for (let i = 0; i < 30; i++) {\r\n          this.imgList.push({\r\n            id: i,\r\n            name: '图片' + i,\r\n            src: 'http://tangzhe123-com.oss-cn-shenzhen.aliyuncs.com/public/60c355f33ea91.jpg',\r\n            isCheck: false\r\n          })\r\n        }\r\n      },\r\n\r\n      clickPhotosItem(index) {\r\n        this.activeIndex = index\r\n      },\r\n\r\n      creOrUpPhotos(Obj) {\r\n        // 修改相册\r\n        if (Obj) {\r\n          let {\r\n            item,\r\n            index\r\n          } = Obj\r\n          // 初始化相册\r\n          this.photoData.name = item.name\r\n          this.photoData.order = item.order\r\n          this.isUpdateIndex = index\r\n          return this.dialogFormVisible = true\r\n        }\r\n        // 创建相册\r\n        this.photoData = {\r\n          name: '',\r\n          order: 0\r\n        }\r\n        this.isUpdateIndex = -1\r\n        this.dialogFormVisible = true\r\n      },\r\n\r\n      confirmPhoto() {\r\n        if (this.photoData.name === '' || this.photoData.order === '') {\r\n          return this.dialogFormVisible = false\r\n        }\r\n        if (this.isUpdateIndex > -1) {\r\n          this.updatePhotos()\r\n          return this.dialogFormVisible = false\r\n        }\r\n        let photos = this.photos\r\n        // 创建相册 => 追加到photos数组前\r\n        photos.unshift({\r\n          name: this.photoData.name,\r\n          order: this.photoData.order,\r\n          num: 0 // 第一次创建相册数量为0\r\n        })\r\n        // 数组去重\r\n        function ArrSet(arr, key) {\r\n          let newObj = {}\r\n          let newArr = []\r\n          for (let i = 0; i < arr.length; i++) {\r\n            const item = arr[i];\r\n            if (!newObj[item[key]]) {\r\n              newObj[item[key]] = newArr.push(item)\r\n            }\r\n          }\r\n          return newArr\r\n        }\r\n        let setArry = ArrSet(photos, 'name')\r\n        this.photos = setArry\r\n        // console.log(this.photos)\r\n        this.dialogFormVisible = false\r\n      },\r\n      // 修改相册\r\n      updatePhotos() {\r\n        this.photos[this.isUpdateIndex].name = this.photoData.name\r\n        this.photos[this.isUpdateIndex].order = this.photoData.order\r\n      },\r\n      // 删除相册\r\n      delPhotos(index) {\r\n        this.$confirm('是否确定删除相册', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n          closeOnClickModal: false // 是否可通过点击遮罩层关闭 MessageBox\r\n        }).then(() => {\r\n          this.photos.splice(index, 1)\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功'\r\n          })\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n      },\r\n      uploadImage() {\r\n        this.diaUpVisible = true\r\n      },\r\n      preItemImg(Obj) {\r\n        this.diaPreVisible = true\r\n        this.preImgSrc = Obj.src\r\n      },\r\n      openImgName(Obj) {\r\n        this.$prompt('请输入新名称', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          inputValue: Obj.name,\r\n          closeOnClickModal: false,\r\n          inputValidator(val) {\r\n            if (val === '') {\r\n              return '图片名称不能为空'\r\n            }\r\n          }\r\n        }).then(({\r\n          value\r\n        }) => {\r\n          Obj.name = value\r\n          this.$message({\r\n            type: 'success',\r\n            message: '修改成功'\r\n          })\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '取消输入'\r\n          });\r\n        })\r\n      },\r\n      delImg(index) {\r\n        this.$confirm('是否删除该图片?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.imgList.splice(index, 1)\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功'\r\n          });\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '取消删除'\r\n          });\r\n        })\r\n      },\r\n      chooseImg(item) {\r\n        console.log(item);\r\n       item.isCheck = !item.isCheck\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lange=\"less\">\r\n  .image-warp {\r\n    position: absolute;\r\n    top: 55px;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    background-color: #f8f9fa;\r\n  }\r\n\r\n  .header-content {\r\n    line-height: 60px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    border-bottom: 1px solid #ccc;\r\n  }\r\n\r\n  .header-select {\r\n    width: 150px;\r\n  }\r\n\r\n  .header-ipt {\r\n    margin: 0 10px;\r\n    width: 200px;\r\n  }\r\n\r\n  .main-container {\r\n    position: relative;\r\n  }\r\n\r\n  .aside-content {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    bottom: 0;\r\n    background-color: #fff;\r\n    border-right: 1px solid #ccc;\r\n  }\r\n\r\n  .aside-li {\r\n    padding: 10px 0;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-around;\r\n    cursor: pointer\r\n  }\r\n\r\n  .drop-down {\r\n    width: 50px;\r\n    height: 25px;\r\n    line-height: 25px;\r\n    border-radius: 5px;\r\n    text-align: center;\r\n    border: 1px solid #ccc;\r\n  }\r\n\r\n  .main-content {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 200px;\r\n    right: 0;\r\n    bottom: 0;\r\n  }\r\n\r\n  .flex-width {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    box-sizing: border-box;\r\n    padding-left: 13px;\r\n  }\r\n\r\n  .img-flex {\r\n    width: 168px; /* 换行子元素固定像素 */\r\n    margin: 0 8px 10px 0px;\r\n    cursor: pointer;\r\n    position: relative;\r\n  }\r\n\r\n  .active-img {\r\n    border: 1px solid #dc3545;\r\n  }\r\n\r\n  .img-src {\r\n    width: 100%;\r\n    height: 100px;\r\n    display: block;\r\n  }\r\n\r\n  .tag-tips {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n  }\r\n\r\n  .img-name {\r\n    color: #fff;\r\n    text-align: center;\r\n    opacity: 0.8;\r\n    background: rgba(0, 0, 0, 0.5);\r\n  }\r\n\r\n  .image-btn {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin: 7px 0;\r\n  }\r\n\r\n  .img-btn {\r\n    margin-left: 0;\r\n  }\r\n\r\n  .footer-content {\r\n    line-height: 60px;\r\n    border-top: 1px solid #ccc;\r\n  }\r\n\r\n  .ipt-width {\r\n    width: 300px;\r\n  }\r\n\r\n  .upload-img {\r\n    text-align: center;\r\n  }\r\n\r\n  .pre-img {\r\n    margin: -60px -20px -30px;\r\n  }\r\n</style>"]}]}