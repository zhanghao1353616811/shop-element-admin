{"remainingRequest":"F:\\shop-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\shop-element-admin\\src\\views\\image\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\shop-element-admin\\src\\views\\image\\index.vue","mtime":1623142641537},{"path":"F:\\shop-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\shop-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\shop-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\shop-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBwaG90b0l0ZW0gZnJvbSAiQC9jb21wb25lbnRzL2ltYWdlL3Bob3RvLWl0ZW0udnVlIgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgcGhvdG9JdGVtCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VsZWN0VmFsOiAn6ZmN5bqPJywKICAgICAgYWN0aXZlSW5kZXg6IDAsCiAgICAgIHBob3RvczogW10sCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgaXNVcGRhdGVJbmRleDogLTEsIC8vIOS/ruaUueebuOWGjAogICAgICBkaWFVcFZpc2libGU6IGZhbHNlLAogICAgICBkaWFQcmVWaXNpYmxlOiBmYWxzZSwKICAgICAgcHJlSW1nU3JjOiAnJywKICAgICAgaXNTZWxJbWc6IGZhbHNlLAogICAgICBpc0FjdGl2ZUltZzogZmFsc2UsCiAgICAgIGltZ0xpc3Q6IFtdLAogICAgICBjaG9vc2VJbWdMaXN0OiBbXSwKICAgICAgc2VhcmNoOiBbewogICAgICAgIG9yZGVyOiAnZGVzYycsCiAgICAgICAga2V3b3JkczogJycKICAgICAgfV0sCiAgICAgIHBob3RvRGF0YTogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIG9yZGVyOiAnJwogICAgICB9LAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHBob3RvVGl0bGUoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVXBkYXRlSW5kZXggPiAtMSA/ICfkv67mlLnnm7jlhownIDogJ+WIm+W7uuebuOWGjCcKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXRQaG90b3MoKQogICAgdGhpcy5pbml0SW1nTGlzdCgpCiAgfSwKCiAgbWV0aG9kczogewogICAgaW5pdFBob3RvcygpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykgewogICAgICAgIHRoaXMucGhvdG9zLnB1c2goewogICAgICAgICAgbmFtZTogJ+ebuOWGjCcgKyBpLAogICAgICAgICAgbnVtOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApLAogICAgICAgICAgb3JkZXI6IDAKICAgICAgICB9KQogICAgICB9CiAgICB9LAoKICAgIGluaXRJbWdMaXN0KCkgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKSB7CiAgICAgICAgdGhpcy5pbWdMaXN0LnB1c2goewogICAgICAgICAgbmFtZTogJ+WbvueJhycgKyBpLAogICAgICAgICAgc3JjOiAnaHR0cDovL3Rhbmd6aGUxMjMtY29tLm9zcy1jbi1zaGVuemhlbi5hbGl5dW5jcy5jb20vcHVibGljLzYwYmRjMzhmNzE5MjguanBnJwogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCgogICAgY2xpY2tQaG90b3NJdGVtKGluZGV4KSB7CiAgICAgIHRoaXMuYWN0aXZlSW5kZXggPSBpbmRleAogICAgfSwKCiAgICBjcmVPclVwUGhvdG9zKE9iaikgewogICAgICAvLyDkv67mlLnnm7jlhowKICAgICAgaWYgKE9iaikgewogICAgICAgIGxldCB7CiAgICAgICAgICBpdGVtLAogICAgICAgICAgaW5kZXgKICAgICAgICB9ID0gT2JqCiAgICAgICAgLy8g5Yid5aeL5YyW55u45YaMCiAgICAgICAgdGhpcy5waG90b0RhdGEubmFtZSA9IGl0ZW0ubmFtZQogICAgICAgIHRoaXMucGhvdG9EYXRhLm9yZGVyID0gaXRlbS5vcmRlcgogICAgICAgIHRoaXMuaXNVcGRhdGVJbmRleCA9IGluZGV4CiAgICAgICAgcmV0dXJuIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlCiAgICAgIH0KICAgICAgLy8g5Yib5bu655u45YaMCiAgICAgIHRoaXMucGhvdG9EYXRhID0gewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIG9yZGVyOiAwCiAgICAgIH0KICAgICAgdGhpcy5pc1VwZGF0ZUluZGV4ID0gLTEKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWUKICAgIH0sCgogICAgY29uZmlybVBob3RvKCkgewogICAgICBpZiAodGhpcy5waG90b0RhdGEubmFtZSA9PT0gJycgfHwgdGhpcy5waG90b0RhdGEub3JkZXIgPT09ICcnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZQogICAgICB9CiAgICAgIGlmICh0aGlzLmlzVXBkYXRlSW5kZXggPiAtMSkgewogICAgICAgIHRoaXMudXBkYXRlUGhvdG9zKCkKICAgICAgICByZXR1cm4gdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlCiAgICAgIH0KICAgICAgbGV0IHBob3RvcyA9IHRoaXMucGhvdG9zCiAgICAgIC8vIOWIm+W7uuebuOWGjCA9PiDov73liqDliLBwaG90b3PmlbDnu4TliY0KICAgICAgcGhvdG9zLnVuc2hpZnQoewogICAgICAgIG5hbWU6IHRoaXMucGhvdG9EYXRhLm5hbWUsCiAgICAgICAgb3JkZXI6IHRoaXMucGhvdG9EYXRhLm9yZGVyLAogICAgICAgIG51bTogMCAvLyDnrKzkuIDmrKHliJvlu7rnm7jlhozmlbDph4/kuLowCiAgICAgIH0pCiAgICAgIC8vIOaVsOe7hOWOu+mHjQogICAgICBmdW5jdGlvbiBBcnJTZXQoYXJyLCBrZXkpIHsKICAgICAgICBsZXQgbmV3T2JqID0ge30KICAgICAgICBsZXQgbmV3QXJyID0gW10KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICAgICAgY29uc3QgaXRlbSA9IGFycltpXTsKICAgICAgICAgIGlmICghbmV3T2JqW2l0ZW1ba2V5XV0pIHsKICAgICAgICAgICAgbmV3T2JqW2l0ZW1ba2V5XV0gPSBuZXdBcnIucHVzaChpdGVtKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gbmV3QXJyCiAgICAgIH0KICAgICAgbGV0IHNldEFycnkgPSBBcnJTZXQocGhvdG9zLCAnbmFtZScpCiAgICAgIHRoaXMucGhvdG9zID0gc2V0QXJyeQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnBob3RvcykKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlCiAgICB9LAogICAgLy8g5L+u5pS555u45YaMCiAgICB1cGRhdGVQaG90b3MoKSB7CiAgICAgIHRoaXMucGhvdG9zW3RoaXMuaXNVcGRhdGVJbmRleF0ubmFtZSA9IHRoaXMucGhvdG9EYXRhLm5hbWUKICAgICAgdGhpcy5waG90b3NbdGhpcy5pc1VwZGF0ZUluZGV4XS5vcmRlciA9IHRoaXMucGhvdG9EYXRhLm9yZGVyCiAgICB9LAogICAgLy8g5Yig6Zmk55u45YaMCiAgICBkZWxQaG90b3MoaW5kZXgpIHsKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu5a6a5Yig6Zmk55u45YaMJywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgIGNsb3NlT25DbGlja01vZGFsOiBmYWxzZSAvLyDmmK/lkKblj6/pgJrov4fngrnlh7vpga7nvanlsYLlhbPpl60gTWVzc2FnZUJveAogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLnBob3Rvcy5zcGxpY2UoaW5kZXgsIDEpCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfJwogICAgICAgIH0pCiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICB1cGxvYWRJbWFnZSgpIHsKICAgICAgdGhpcy5kaWFVcFZpc2libGUgPSB0cnVlCiAgICB9LAogICAgcHJlSXRlbUltZyhPYmopIHsKICAgICAgdGhpcy5kaWFQcmVWaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLnByZUltZ1NyYyA9IE9iai5zcmMKICAgIH0sCiAgICBvcGVuSW1nTmFtZShPYmopIHsKICAgICAgdGhpcy4kcHJvbXB0KCfor7fovpPlhaXmlrDlkI3np7AnLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICBpbnB1dFZhbHVlOiBPYmoubmFtZSwKICAgICAgICBjbG9zZU9uQ2xpY2tNb2RhbDogZmFsc2UsCiAgICAgICAgaW5wdXRWYWxpZGF0b3IodmFsKSB7CiAgICAgICAgICBpZiAodmFsID09PSAnJykgewogICAgICAgICAgICByZXR1cm4gJ+WbvueJh+WQjeensOS4jeiDveS4uuepuicKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLnRoZW4oKHsKICAgICAgICB2YWx1ZQogICAgICB9KSA9PiB7CiAgICAgICAgT2JqLm5hbWUgPSB2YWx1ZQogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueaIkOWKnycKICAgICAgICB9KQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5Y+W5raI6L6T5YWlJwogICAgICAgIH0pOwogICAgICB9KQogICAgfSwKICAgIGRlbEltZyhpbmRleCkgewogICAgICB0aGlzLiRjb25maXJtKCfmmK/lkKbliKDpmaTor6Xlm77niYc/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuaW1nTGlzdC5zcGxpY2UoaW5kZXgsIDEpCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfJwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5Y+W5raI5Yig6ZmkJwogICAgICAgIH0pOwogICAgICB9KQogICAgfSwKICAgIHNlbGVjdEltZyhpbmRleCkgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW1nTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmltZ0xpc3RbaV07CiAgICAgICAgaWYgKGk9PT1pbmRleCkgewogICAgICAgICAgdGhpcy5pc0FjdGl2ZUltZyA9ICEgdGhpcy5pc0FjdGl2ZUltZyAKICAgICAgICAgIHRoaXMuaXNTZWxJbWcgPSAhdGhpcy5pc1NlbEltZwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/image","sourcesContent":["<template>\r\n  <el-container class=\"image-warp\">\r\n    <el-header class=\"header-content\">\r\n      <div>\r\n        <el-select class=\"header-select\" v-model=\"search.order\" size=\"mini\" placeholder=\"输入图片排序方式\">\r\n          <el-option label=\"降序\" value=\"desc\"></el-option>\r\n          <el-option label=\"升序\" value=\"asce\"></el-option>\r\n        </el-select>\r\n        <el-input class=\"header-ipt\" v-model=\"search.kewords\" placeholder=\"输入图片名称\" size=\"mini\" clearable></el-input>\r\n        <el-button type=\"success\" size=\"mini\">搜索</el-button>\r\n      </div>\r\n      <div>\r\n        <el-button type=\"info\" size=\"mini\" v-if=\"isSelImg\">取消选中</el-button>\r\n        <el-button type=\"danger\" size=\"mini\" v-if=\"isSelImg\">批量删除</el-button>\r\n        <el-button type=\"success\" size=\"mini\" @click.stop=\"creOrUpPhotos(false)\">创建相册</el-button>\r\n        <el-button type=\"warning\" size=\"mini\" @click.stop=\"uploadImage()\">上传图片</el-button>\r\n      </div>\r\n    </el-header>\r\n    <el-container class=\"main-container\">\r\n      <el-aside class=\"aside-content\" width=\"200px\">\r\n        <photo-item class=\"aside-li\" v-for=\"(item, index) in photos\" :key=\"index\" :item=\"item\" :index=\"index\"\r\n          :isActive=\"(activeIndex === index)\" @click=\"clickPhotosItem\" @update=\"creOrUpPhotos\" @del=\"delPhotos\">\r\n        </photo-item>\r\n      </el-aside>\r\n      <el-main class=\"main-content\">\r\n        <div class=\"flex-width\">\r\n          <el-card :class=\"[ isActiveImg ? 'active-img' : '', 'img-flex']\" :body-style=\"{padding: '0px'}\" shadow=\"hover\" v-for=\"(item, index) in imgList\"\r\n            :key=\"index\">\r\n            <img class=\"img-src\" :src=\"item.src\" @click=\"selectImg(index)\">\r\n            <el-tag class=\"tag-tips\" type=\"danger\" size=\"mini\" v-if=\"isSelImg\">标签五</el-tag>\r\n            <div class=\"img-name\">{{item.name}}</div>\r\n            <div class=\"image-btn\">\r\n              <el-button class=\"el-icon-view\" type=\"mini\" @click=\"preItemImg(item)\"></el-button>\r\n              <el-button class=\"el-icon-edit img-btn\" type=\"mini\" @click=\"openImgName(item)\"></el-button>\r\n              <el-button class=\"el-icon-delete img-btn\" type=\"mini\" @click=\"delImg(index)\"></el-button>\r\n            </div>\r\n          </el-card>\r\n        </div>\r\n      </el-main>\r\n    </el-container>\r\n    <el-footer class=\"footer-content\">Footer</el-footer>\r\n    <!-- 修改创建相册 -->\r\n    <el-dialog width=\"700px\" :title=\"photoTitle\" :visible.sync=\"dialogFormVisible\" :close-on-click-modal=\"false\">\r\n      <el-form :model=\"photoData\">\r\n        <el-form-item label=\"相册名称\">\r\n          <el-input class=\"ipt-width\" v-model=\"photoData.name\" placeholder=\"请输入相册名称\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"相册排序\">\r\n          <el-input-number v-model=\"photoData.order\" :min=\"0\"></el-input-number>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button type=\"info\" @click=\"dialogFormVisible = false\">取消</el-button>\r\n        <el-button type=\"success\" @click.stop.native=\"confirmPhoto\">确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <!-- 上传图片 -->\r\n    <el-dialog width=\"700px\" title=\"上传图片\" :visible.sync=\"diaUpVisible\" :close-on-click-modal=\"false\">\r\n      <el-upload class=\"upload-img\" drag multiple action=\"https://jsonplaceholder.typicode.com/posts/\">\r\n        <i class=\"el-icon-upload\"></i>\r\n        <div>将文件拖到止处, 或<em>点击上传</em></div>\r\n        <div slot=\"tip\">只能上传jpg/png文件, 且不超过500kb</div>\r\n      </el-upload>\r\n    </el-dialog>\r\n    <!-- 预览图片 -->\r\n    <el-dialog :visible.sync=\"diaPreVisible\" :close-on-click-modal=\"false\">\r\n      <div class=\"pre-img\">\r\n        <img class=\"img-src\" :src=\"preImgSrc\">\r\n      </div>\r\n    </el-dialog>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\n  import photoItem from \"@/components/image/photo-item.vue\"\r\n  export default {\r\n    components: {\r\n      photoItem\r\n    },\r\n    data() {\r\n      return {\r\n        selectVal: '降序',\r\n        activeIndex: 0,\r\n        photos: [],\r\n        dialogFormVisible: false,\r\n        isUpdateIndex: -1, // 修改相册\r\n        diaUpVisible: false,\r\n        diaPreVisible: false,\r\n        preImgSrc: '',\r\n        isSelImg: false,\r\n        isActiveImg: false,\r\n        imgList: [],\r\n        chooseImgList: [],\r\n        search: [{\r\n          order: 'desc',\r\n          kewords: ''\r\n        }],\r\n        photoData: {\r\n          name: '',\r\n          order: ''\r\n        },\r\n      }\r\n    },\r\n    computed: {\r\n      photoTitle() {\r\n        return this.isUpdateIndex > -1 ? '修改相册' : '创建相册'\r\n      }\r\n    },\r\n    created() {\r\n      this.initPhotos()\r\n      this.initImgList()\r\n    },\r\n\r\n    methods: {\r\n      initPhotos() {\r\n        for (let i = 0; i < 100; i++) {\r\n          this.photos.push({\r\n            name: '相册' + i,\r\n            num: Math.floor(Math.random() * 100),\r\n            order: 0\r\n          })\r\n        }\r\n      },\r\n\r\n      initImgList() {\r\n        for (let i = 0; i < 100; i++) {\r\n          this.imgList.push({\r\n            name: '图片' + i,\r\n            src: 'http://tangzhe123-com.oss-cn-shenzhen.aliyuncs.com/public/60bdc38f71928.jpg'\r\n          })\r\n        }\r\n      },\r\n\r\n      clickPhotosItem(index) {\r\n        this.activeIndex = index\r\n      },\r\n\r\n      creOrUpPhotos(Obj) {\r\n        // 修改相册\r\n        if (Obj) {\r\n          let {\r\n            item,\r\n            index\r\n          } = Obj\r\n          // 初始化相册\r\n          this.photoData.name = item.name\r\n          this.photoData.order = item.order\r\n          this.isUpdateIndex = index\r\n          return this.dialogFormVisible = true\r\n        }\r\n        // 创建相册\r\n        this.photoData = {\r\n          name: '',\r\n          order: 0\r\n        }\r\n        this.isUpdateIndex = -1\r\n        this.dialogFormVisible = true\r\n      },\r\n\r\n      confirmPhoto() {\r\n        if (this.photoData.name === '' || this.photoData.order === '') {\r\n          return this.dialogFormVisible = false\r\n        }\r\n        if (this.isUpdateIndex > -1) {\r\n          this.updatePhotos()\r\n          return this.dialogFormVisible = false\r\n        }\r\n        let photos = this.photos\r\n        // 创建相册 => 追加到photos数组前\r\n        photos.unshift({\r\n          name: this.photoData.name,\r\n          order: this.photoData.order,\r\n          num: 0 // 第一次创建相册数量为0\r\n        })\r\n        // 数组去重\r\n        function ArrSet(arr, key) {\r\n          let newObj = {}\r\n          let newArr = []\r\n          for (let i = 0; i < arr.length; i++) {\r\n            const item = arr[i];\r\n            if (!newObj[item[key]]) {\r\n              newObj[item[key]] = newArr.push(item)\r\n            }\r\n          }\r\n          return newArr\r\n        }\r\n        let setArry = ArrSet(photos, 'name')\r\n        this.photos = setArry\r\n        // console.log(this.photos)\r\n        this.dialogFormVisible = false\r\n      },\r\n      // 修改相册\r\n      updatePhotos() {\r\n        this.photos[this.isUpdateIndex].name = this.photoData.name\r\n        this.photos[this.isUpdateIndex].order = this.photoData.order\r\n      },\r\n      // 删除相册\r\n      delPhotos(index) {\r\n        this.$confirm('是否确定删除相册', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n          closeOnClickModal: false // 是否可通过点击遮罩层关闭 MessageBox\r\n        }).then(() => {\r\n          this.photos.splice(index, 1)\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功'\r\n          })\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n      },\r\n      uploadImage() {\r\n        this.diaUpVisible = true\r\n      },\r\n      preItemImg(Obj) {\r\n        this.diaPreVisible = true\r\n        this.preImgSrc = Obj.src\r\n      },\r\n      openImgName(Obj) {\r\n        this.$prompt('请输入新名称', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          inputValue: Obj.name,\r\n          closeOnClickModal: false,\r\n          inputValidator(val) {\r\n            if (val === '') {\r\n              return '图片名称不能为空'\r\n            }\r\n          }\r\n        }).then(({\r\n          value\r\n        }) => {\r\n          Obj.name = value\r\n          this.$message({\r\n            type: 'success',\r\n            message: '修改成功'\r\n          })\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '取消输入'\r\n          });\r\n        })\r\n      },\r\n      delImg(index) {\r\n        this.$confirm('是否删除该图片?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.imgList.splice(index, 1)\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功'\r\n          });\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '取消删除'\r\n          });\r\n        })\r\n      },\r\n      selectImg(index) {\r\n        for (let i = 0; i < this.imgList.length; i++) {\r\n          const item = this.imgList[i];\r\n          if (i===index) {\r\n            this.isActiveImg = ! this.isActiveImg \r\n            this.isSelImg = !this.isSelImg\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lange=\"less\">\r\n  .image-warp {\r\n    position: absolute;\r\n    top: 55px;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    background-color: #f8f9fa;\r\n  }\r\n\r\n  .header-content {\r\n    line-height: 60px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    border-bottom: 1px solid #ccc;\r\n  }\r\n\r\n  .header-select {\r\n    width: 150px;\r\n  }\r\n\r\n  .header-ipt {\r\n    margin: 0 10px;\r\n    width: 200px;\r\n  }\r\n\r\n  .main-container {\r\n    position: relative;\r\n  }\r\n\r\n  .aside-content {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    bottom: 0;\r\n    background-color: #fff;\r\n    border-right: 1px solid #ccc;\r\n  }\r\n\r\n  .aside-li {\r\n    padding: 10px 0;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-around;\r\n    cursor: pointer\r\n  }\r\n\r\n  .drop-down {\r\n    width: 50px;\r\n    height: 25px;\r\n    line-height: 25px;\r\n    border-radius: 5px;\r\n    text-align: center;\r\n    border: 1px solid #ccc;\r\n  }\r\n\r\n  .main-content {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 200px;\r\n    right: 0;\r\n    bottom: 0;\r\n  }\r\n\r\n  .flex-width {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    padding-left: 2px;\r\n  }\r\n\r\n  .img-flex {\r\n    width: 15.8%;\r\n    margin: 5px;\r\n    cursor: pointer;\r\n    position: relative;\r\n  }\r\n\r\n  .active-img {\r\n    border: 1px solid #dc3545;\r\n  }\r\n\r\n  .img-src {\r\n    width: 100%;\r\n    display: block;\r\n  }\r\n\r\n  .tag-tips {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n  }\r\n\r\n  .img-name {\r\n    color: #fff;\r\n    text-align: center;\r\n    opacity: 0.8;\r\n    background: rgba(0, 0, 0, 0.5);\r\n  }\r\n\r\n  .image-btn {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin: 7px 0;\r\n  }\r\n\r\n  .img-btn {\r\n    margin-left: 0;\r\n  }\r\n\r\n  .footer-content {\r\n    line-height: 60px;\r\n    border-top: 1px solid #ccc;\r\n  }\r\n\r\n  .ipt-width {\r\n    width: 300px;\r\n  }\r\n\r\n  .upload-img {\r\n    text-align: center;\r\n  }\r\n\r\n  .pre-img {\r\n    margin: -60px -20px -30px;\r\n  }\r\n</style>"]}]}